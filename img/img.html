<!DOCTYPE html>
<html>
<head>
<title>Image Upload to S3</title>
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.1415.0.min.js"></script>
</head>
<body>

<h1>Image Upload to S3</h1>

<input type="file" id="imageInput" accept="image/*">
<button onclick="uploadImage()">Upload</button>

<div id="status"></div>

<script>
  AWS.config.update({
    accessKeyId: 'YOUR_ACCESS_KEY_ID', // **REPLACE WITH YOUR CREDENTIALS**
    secretAccessKey: 'YOUR_SECRET_ACCESS_KEY', // **REPLACE WITH YOUR CREDENTIALS**
    region: 'YOUR_AWS_REGION'  // **REPLACE WITH YOUR REGION**
  });

  const s3 = new AWS.S3();
  const bucketName = 'ad1server'; // Your bucket name
  const prefix = 'img/';        // The prefix (folder) within the bucket

  function uploadImage() {
    const fileInput = document.getElementById('imageInput');
    const file = fileInput.files[0];

    if (!file) {
      setStatus('Please select an image.');
      return;
    }

    const params = {
      Bucket: bucketName,
      Key: prefix + file.name, // Use the prefix and original file name
      Body: file,
      ContentType: file.type
      // ACL: 'public-read' // **CAREFUL WITH THIS - SEE PREVIOUS RESPONSE**
    };

    s3.upload(params, (err, data) => {
      if (err) {
        console.error(err);
        setStatus('Upload failed: ' + err.message);
      } else {
        console.log('File uploaded successfully:', data.Location);
        setStatus('Upload successful! File location: ' + data.Location);
      }
    });
  }

  function setStatus(message) {
    document.getElementById('status').textContent = message;
  }
</script>

</body>
</html>